---
title: Adding Interactive Overlays to Videos
description: 'In this topic you will learn how to add interactive overlays to videos using HapYak.'
parent: Interactivity
layout: staging
---
<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <p>The HapYak plugin for the Brightcove Player connects your Brightcove account to your HapYak Account. Using this plugin has the following benefits:</p>
    <ul>
      <li>Automatic HapYak project creation  for each video viewed in the configured player</li>
      <li>Programmatic access to video metadata from the HapYak Extension APIs</li>
      <li>Dynamic loading of HapYak templates</li>
      <li>Automatic syncing of HapYak project titles with Brightcove media titles</li>
    </ul>
    <p>When interactions are added to a HapYak project,  they will automatically appear on the corresponding video. This removes the need to copy and publish embed code within  HapYak Studio.</p>
  </section>
  <section class="bcls-section">
    <h2 id="configure-player">Before you get started</h2>
    <p>Before you can add HapYak interactivity to a player, you need a HapYak-enabled Brightcove Player and you need to make sure a HapYak project has been created. For information on how to do this, see <a href="getting-started-interactivity.html">Getting Started with Interactivity</a>.</p>
  </section>
  <section class="bcls-section">
    <h2 id="text-overlay">Adding a text overlay</h2>
    <p>When a video is played inside of a HapYak-enabled Brightcove Player, a HapYak project will be created automatically.  Follow these steps to add a text overlay to a project:</p>
    <ol class="bcls-tasklist-restart">
      <li>In the HapYak UI, click on the project to open it.</li>
      <li>In the bottom toolbar, click on the text overlay button.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-add-overlay.png"> </figure>
      </li>
      <li>Click on the <strong>Editor</strong> link in the menu.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-overlay-editor.png"> </figure>
      </li>
      <li>Enter some sample text for the overlay and click <strong>Submit</strong>.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-overlay-text-added.png"> </figure>
      </li>
      <li>Click <strong>Done</strong>.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="transparent-overlay">Adding a transparent overlay</h2>
    <p>In this topic a simple text overlay will be added just to validate that the interactivity can be viewed inside of a Brightcove Player.</p>
    <ol class="bcls-tasklist-restart">
      <li>In the HapYak UI, click on the project to open it.</li>
      <li>In the bottom toolbar, click on the text overlay button.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-add-overlay.png"> </figure>
      </li>
      <li>Click on the <strong>Editor</strong> link in the menu.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-overlay-editor.png"> </figure>
      </li>
      <li>Enter some sample text for the overlay and click <strong>Submit</strong>.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-overlay-text-added.png"> </figure>
      </li>
      <li>Click <strong>Done</strong>.</li>
    </ol>
  </section>
<section class="bcls-section">
    <h2 id="image-overlay">Adding an image overlay</h2>
    <p>In this topic a simple text overlay will be added just to validate that the interactivity can be viewed inside of a Brightcove Player.</p>
    <ol class="bcls-tasklist-restart">
      <li>In the HapYak UI, click on the project to open it.</li>
      <li>In the bottom toolbar, click on the text overlay button.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-add-overlay.png"> </figure>
      </li>
      <li>Click on the <strong>Editor</strong> link in the menu.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-overlay-editor.png"> </figure>
      </li>
      <li>Enter some sample text for the overlay and click <strong>Submit</strong>.
        <figure class="bcls-figure"> <img src="/assets/images/interactivity/gsi-hapyak-overlay-text-added.png"> </figure>
      </li>
      <li>Click <strong>Done</strong>.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="works">How it works</h2>
    <h3>Automatic creation of projects in the HapYak portal</h3>
    <p>When a video is loaded in a properly configured player the following things happen:</p>
    <ol class="bcls-tasklist-restart">
      <li>The Brightcove Video Id, Title, Tags and Custom Fields are sent to HapYak.</li>
      <li>HapYak attempts to look up the Video ID within your HapYak Group.</li>
      <li><strong>If no matching record is found</strong>, then HapYak creates a Project with the data sent by Brightcove.</li>
      <li>HapYak will also set properties on the Project to indicate that it was "auto created", the "is_published" value will be set to TRUE and a tag with the value "live" will be added.</li>
    </ol>
    <figure class="bcls-figure"> <img src="/assets/images/getting-started/bc-player-configure-dialog.png"> </figure>
    <h3>Display of the proper HapYak project on the Brightcove video</h3>
    <p>When a video is loaded in a properly configured player, the following things happen:</p>
    <ol class="bcls-tasklist-restart">
      <li>The Brightcove video ID, title, tags and custom fields are sent to HapYak.</li>
      <li>HapYak attempts to look up the video ID within your HapYak Group.</li>
      <li><strong>If a matching record is found</strong>, then HapYak filters to the record that has the "is_published" value set to TRUE. The Project with both the matching VideoId and the "is_published" value set to TRUE will be displayed.</li>
      <li><strong>If more than one matching record is found</strong>, then HapYak filters to the most recently modified record that has the "is_published" value set to TRUE. The most recently modified Project with both the matching VideoId and the "is_published" value set to TRUE will be displayed.</li>
    </ol>
    <aside class="bcls-aside bcls-aside--information">Note: The "is_published" value can be manually changed as needed by using the CONFIGURE dialog pictured above.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="notes">Important notes</h2>
    <ol class="bcls-tasklist-restart">
      <li>There will be an initial delay between the time when the HapYak project is auto created and the time that annotations appear via the plugin. The delay can be upwards of a couple hours.</li>
      <li>Do not manually create Brightcove projects in the HapYak portal. The plugin will do this automatically.</li>
      <li>Do not manually modify the video source of a HapYak project that was automatically created. </li>
      <li>Do not use the EMBED code generated from the HapYak tools when using the plugin. Instead publish your videos per the normal Brightcove workflow.</li>
      <li>Workflow-generated projects can be deleted through the HapYak UI. Please note that subsequent loads of the corresponding video through the Brightcove Player will not auto-generate a separate project in the portal.</li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="advanced">Advanced</h2>
    <ol class="bcls-tasklist-restart">
      <li>You can tag a HapYak Template and add the same tag to multiple Brightcove videos. This is a quick and easy way to add identical annotations to dozens or hundreds of Brightcove videos. For example, if your video is tagged "click-to-buy-cta" then a matching HapYak Template also tagged "click-to-buy-cta" will be added to that video.</li>
      <li>A custom javascript method can be provided to capture tracking events as they occur. To do so simply add the location of your javascript file in the plugin options for "hapyak"
        <pre><code>
{
  "apiKey": …,
  "customTracking": "https://dmhl2y7t4r72w.cloudfront.net/brightcove/bcovTrackingHandler.js"
}
</code></pre>
      </li>
      <li>HapYak loads its own copy of JQuery by default.   If you embed the Brightcove Player with the HapYak plugin enabled, HapYak will override an existing copy of JQuery already on the page when it loads.   To prevent this behavior and preserve an existing copy of JQuery, you must pass the “preserveJQuery” option in plugin options when setting up the plugin.   For example, specifying
        <pre><code>
{
  "apiKey": …,
  "preserveJQuery": true
}
</code></pre>
        <p>will prevent HapYak from loading its own JQuery as long as there is already one on the page.</p>
        <table class="bcls-table">
          <caption class="bcls-caption--table">
          Summary of HapYak jQuery Loading Behavior
          </caption>
          <tbody class="bcls-table__body">
            <tr>
              <td></td>
              <td>preserveJQuery: true</td>
              <td>preserveJQuery: false</td>
            </tr>
            <tr>
              <td>jQuery present on page</td>
              <td>Do not load jQuery</td>
              <td>Load jQuery</td>
            </tr>
            <tr>
              <td>jQuery absent from page</td>
              <td>Load jQuery</td>
              <td>Load jQuery</td>
            </tr>
          </tbody>
        </table>
      </li>
      <li>HapYak emits a custom event on the Brightcove Player instance that notifies when the HapYak viewer instance is ready. This event is <code>hyViewerLoaded</code> which can be listened for using the following code:
        <pre><code>
bcPlayerInstance.on(‘hyViewerLoaded’, function () {
   console.log(player.hapyakViewer);
});
</code></pre>
        <p>As seen above, you can access the HapYak viewer instance off of the player instance as a property called <code>hapyakViewer</code>.</p>
      </li>
    </ol>
  </section>
  <section class="bcls-section">
    <h2 id="mobile">Mobile support</h2>
    <p>Some mobile devices will strip interactive elements when videos are opened in device-native players (like the Quicktime player on iOS devices). HapYak has created a solution that overrides the default behavior of video on iOS and Android devices. By &quot;Mocking Fullscreen&quot;, your videos can play in full screen and retain HapYak interactive features.</p>
    <p>Below are a few steps that help you get set up.</p>
    <h3>Getting Setup</h3>
    <p>If you have not already done so, use steps at the top of this document to setup the HapYak plugin on a Brightcove Player of your choice.</p>
    <ol class="bcls-tasklist-restart">
      <li>Open the Players module in Video Cloud Studio.</li>
      <li>In the Players list, click the HapYak playerthat you have configured using the steps above.</li>
      <li>Click <strong>Plugins</strong> in the left navigation menu.</li>
      <li>Click on the <strong>hapyak</strong> plugin.</li>
      <li>In the <strong>Options(JSON)</strong>, add the options shown below in the “JSON options” section*. If you have correctly configured the plugin, your apiKey will already be included.
        <ul>
          <li><strong>loadFullScreenMobile: true.</strong> This property will override the default fullscreen behavior on iOS devices</li>
          <li><strong>position: middle.</strong> This will ensure that the video appears in the middle of the devices display in portrait mode (mimics default behavior of all mobile devices)</li>
        </ul>
      </li>
      <li>Click <strong>Save</strong>.</li>
      <li>Click <strong>Publish &amp; Embed</strong> &gt; <strong>Publish Changes</strong>.</li>
      <li>Open the <strong>Media</strong> module in your Brightcove account and select the video you’d like to publish.</li>
      <li>Click <strong>Publish and embed</strong> &gt; <strong>Publish to web</strong>, then select the correct hapyak configured player from the dropdown list of players.</li>
      <li><strong>CRITICAL STEP</strong>: Additionally, in the embed code, you MUST add <code>playsinline</code> inside the <code>&lt;video-js&gt;</code> tag. Please reference the example below to ensure this attribute has been added correctly.</li>
    </ol>
    <h3>Configuration</h3>
    <p><strong>JSON options:</strong></p>
    <p>The following configuration will allow videos to be show in fullscreen with annotations present:</p>
    <pre><code>
{
  “loadFullScreenMobile”: true,
  "position": "middle",
  “apiKey”: “your-api-key-here”
}
</code></pre>
    <p>Sample embed code for optimal mobile configuration:</p>
    <pre><code>
&lt;video-js<br>   playsinline<br>   data-account="2335723960001"<br>   data-player="beYnaVQrm"<br>   data-embed="default"<br>   controls=""<br>   data-video-id="6129560246001"<br>   data-playlist-id=""<br>   data-application-id=""<br>   width="960"<br>   height="540"&gt;<br>&lt;/video-js&gt;<br>&lt;script src="https://players.brightcove.net/2335723960001/beYnaVQrm_default/index.min.js"&gt;&lt;/script&gt;
</code></pre>
  </section>
</article>
